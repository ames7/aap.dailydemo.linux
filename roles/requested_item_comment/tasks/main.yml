---
- name: Retrieve requested item ticket sysid
  register: result
  servicenow.itsm.api_info:
    resource: sc_req_item
    sysparm_query: numberSTARTSWITH{{ ticket_number }}

- name: Print the result
  ansible.builtin.debug:
    var: result

- name: Update the requested item work notes and state in ServiceNow
  servicenow.itsm.api:
    action: patch
    resource: sc_req_item
    # sys_id: "{{ result.record[0].sys_id }}"
    sys_id: "{{ ticket_sys_id }}"
    data:
      comments: "{{ requested_item_comment_comments }}"
      stage: "{{ requested_item_comment_stage }}"
